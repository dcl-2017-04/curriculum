title: Data rectangling
theme: explore
needs: list-cols
readings: ~
desc: "\nData rectangling is the process of turning non-rectangular data into tidy
  tibbles. The term was [coined by](https://speakerdeck.com/jennybc/data-rectangling)
  [Jenny Bryan](https://www.stat.ubc.ca/~jenny/). Here we're going to focus on deeply
  nested lists as generated by JSON, a very common data type for web APIs.\n\nTo work
  with JSON we need the jsonlite package, which I recommend loading before the tidyverse.
  (Both purrr and jsonlite provide a flatten function; if you load jsonlite second,
  you'll get that function instead of the one from purrr.)\n\n``` r\nlibrary(jsonlite)\nlibrary(tidyverse)\nlibrary(repurrrsive)\n```\n\nWe're
  going to use some data from Jenny's repurrrsive package, which you'll need to install
  from GitHub. We'll also use the GitHub version of purrr which fixes some bugs that
  will make your life easier.\n\n``` r\n# install.packages(\"devtools\")\ndevtools::install_github(\"jennybc/repurrrsive\")\ndevtools::install_github(\"tidyverse/purrr\")\n```\n\nJSON\n----\n\nJSON
  is a popular data exchange format that made up of three simple components:\n\n-
  \  **Values**, like numbers, `true`, `false`, and strings inside double quotes.\n\n
  \   ``` json\n    true\n    1.345\n    \"this is a string\"\n    ```\n\n-   **Arrays**,
  sequences of values surrounded in square brackets. JSON arrays are like R's lists:
  you can have anything inside an array including other arrays.\n\n    ``` json\n
  \   [1, 2, 3, 10, 120]\n    [\"this\", \"is\", \"a\", \"string\"]\n    [\"can arrays
  mix types?\", true, 100]\n    ```\n\n-   **Objects**, name value pairs separated
  by colons. Objects are like named lists.\n\n    ``` json\n    {\n      \"key\":
  \"value\",\n      \"name\": \"Hadley\",\n      \"company\": \"RStudio\"\n    }\n
  \   ```\n\nArrays and objects can be nested in arbitrarily: it's common to have
  arrays of objects, and objects with array values. You can load a json file into
  R with `jsonlite::read_json()`. Both arrays and objects are turned into R lists:
  objects become named lists, and arrays become unnamed lists.\n\nAn API of Ice and
  Fire\n----------------------\n\nLet's start with a fairly simple example: information
  about Game of Throne characters from the [API of Ice and Fire](https://anapioficeandfire.com)
  stored in `repurrrsive::got_chars`. The goal is to create a tibble with one row
  for each character.\n\n### Inspect\n\nThe first challenge is just figuring out what
  this data looks like. Hopefully your instinct is to try `str()`. This is a great
  instinct, but it's not very helpful here because `str()` will prints pages and pages
  of output. Another option, if you're willing to live (a little) dangerously, is
  to use a [daily build](https://dailies.rstudio.com) of RStudio which has a good
  interactive explorer that you can activate with:\n\n``` r\nView(got_chars)\n```\n\nOtherwise,
  you can use a powerful and general technique: understand the list by peeling it
  apart one layer at a time. To do that you need to first figure out if you have an
  *array* (an unnamed list, which you should subset with an integer), or an *object*
  (a named list, which you should subset with a string). You can figure that our using
  `names()`:\n\n``` r\nnames(got_chars)\n#> NULL\nlength(got_chars)\n#> [1] 29\n\none
  <- got_chars[[1]]\nstr(one)\n#> List of 18\n#>  $ url        : chr \"http://www.anapioficeandfire.com/api/characters/1022\"\n#>
  \ $ id         : int 1022\n#>  $ name       : chr \"Theon Greyjoy\"\n#>  $ gender
  \    : chr \"Male\"\n#>  $ culture    : chr \"Ironborn\"\n#>  $ born       : chr
  \"In 278 AC or 279 AC, at Pyke\"\n#>  $ died       : chr \"\"\n#>  $ alive      :
  logi TRUE\n#>  $ titles     : chr [1:3] \"Prince of Winterfell\" \"Captain of Sea
  Bitch\" \"Lord of the Iron Islands (by law of the green lands)\"\n#>  $ aliases
  \   : chr [1:4] \"Prince of Fools\" \"Theon Turncloak\" \"Reek\" \"Theon Kinslayer\"\n#>
  \ $ father     : chr \"\"\n#>  $ mother     : chr \"\"\n#>  $ spouse     : chr \"\"\n#>
  \ $ allegiances: chr \"House Greyjoy of Pyke\"\n#>  $ books      : chr [1:3] \"A
  Game of Thrones\" \"A Storm of Swords\" \"A Feast for Crows\"\n#>  $ povBooks   :
  chr [1:2] \"A Clash of Kings\" \"A Dance with Dragons\"\n#>  $ tvSeries   : chr
  [1:6] \"Season 1\" \"Season 2\" \"Season 3\" \"Season 4\" ...\n#>  $ playedBy   :
  chr \"Alfie Allen\"\n```\n\nHere it we have an array of 29 objects, where each object
  is a person. Typically JSON files have consistent structure, so if the first element
  of the list is a person, it's likely all the other elements will be too.\n\n###
  Rectangle\n\nImagine we want to collapse some of this information into a tibble
  with one row for each person. For the sake of this example, lets say we want the
  following variables:\n\n-   The name of the character.\n-   Their unique identifier.\n-
  \  If they're alive.\n-   Their gender.\n-   The books they appear in.\n\nTo extract
  each of these variables we need to use a map function. The first four are straightforward:
  you just need to identify the name of the component and its type.\n\n``` r\ngot_chars
  %>% map_chr(\"name\")\n#>  [1] \"Theon Greyjoy\"      \"Tyrion Lannister\"   \"Victarion
  Greyjoy\" \n#>  [4] \"Will\"               \"Areo Hotah\"         \"Chett\"             \n#>
  \ [7] \"Cressen\"            \"Arianne Martell\"    \"Daenerys Targaryen\"\n#> [10]
  \"Davos Seaworth\"     \"Arya Stark\"         \"Arys Oakheart\"     \n#> [13] \"Asha
  Greyjoy\"       \"Barristan Selmy\"    \"Varamyr\"           \n#> [16] \"Brandon
  Stark\"      \"Brienne of Tarth\"   \"Catelyn Stark\"     \n#> [19] \"Cersei Lannister\"
  \  \"Eddard Stark\"       \"Jaime Lannister\"   \n#> [22] \"Jon Connington\"     \"Jon
  Snow\"           \"Aeron Greyjoy\"     \n#> [25] \"Kevan Lannister\"    \"Melisandre\"
  \        \"Merrett Frey\"      \n#> [28] \"Quentyn Martell\"    \"Sansa Stark\"\ngot_chars
  %>% map_int(\"id\")\n#>  [1] 1022 1052 1074 1109 1166 1267 1295  130 1303 1319  148
  \ 149  150  168\n#> [15] 2066  208  216  232  238  339  529  576  583   60  605
  \ 743  751  844\n#> [29]  957\ngot_chars %>% map_lgl(\"alive\")\n#>  [1]  TRUE  TRUE
  \ TRUE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE\n#> [12] FALSE  TRUE  TRUE
  FALSE  TRUE  TRUE FALSE  TRUE FALSE  TRUE  TRUE\n#> [23]  TRUE  TRUE FALSE  TRUE
  FALSE FALSE  TRUE\ngot_chars %>% map_chr(\"gender\")\n#>  [1] \"Male\"   \"Male\"
  \  \"Male\"   \"Male\"   \"Male\"   \"Male\"   \"Male\"  \n#>  [8] \"Female\" \"Female\"
  \"Male\"   \"Female\" \"Male\"   \"Female\" \"Male\"  \n#> [15] \"Male\"   \"Male\"
  \  \"Female\" \"Female\" \"Female\" \"Male\"   \"Male\"  \n#> [22] \"Male\"   \"Male\"
  \  \"Male\"   \"Male\"   \"Female\" \"Male\"   \"Male\"  \n#> [29] \"Female\"\n```\n\nThe
  list of books is a little trickier:\n\n``` r\ngot_chars %>% map_chr(\"books\")\n#>
  Error: Result 1 is not a length 1 atomic vector\n```\n\nThis is because the `map_`
  functions want scalars: the contract for a map function is that it always returns
  a vector the same length as the input. So instead of returning an atomic vector,
  here we need a list, as produced by `map()`:\n\n``` r\ngot_chars %>% map(\"books\")
  %>% head(10) %>% str()\n#> List of 10\n#>  $ : chr [1:3] \"A Game of Thrones\" \"A
  Storm of Swords\" \"A Feast for Crows\"\n#>  $ : chr [1:2] \"A Feast for Crows\"
  \"The World of Ice and Fire\"\n#>  $ : chr [1:3] \"A Game of Thrones\" \"A Clash
  of Kings\" \"A Storm of Swords\"\n#>  $ : chr \"A Clash of Kings\"\n#>  $ : chr
  [1:3] \"A Game of Thrones\" \"A Clash of Kings\" \"A Storm of Swords\"\n#>  $ :
  chr [1:2] \"A Game of Thrones\" \"A Clash of Kings\"\n#>  $ : chr [1:2] \"A Storm
  of Swords\" \"A Feast for Crows\"\n#>  $ : chr [1:4] \"A Game of Thrones\" \"A Clash
  of Kings\" \"A Storm of Swords\" \"A Dance with Dragons\"\n#>  $ : chr \"A Feast
  for Crows\"\n#>  $ : chr \"A Feast for Crows\"\n```\n\nOnce we confirmed that we
  can extract each variable individually, we can combine them into a single tibble:\n\n```
  r\ngot_tibble <- tibble(\n  name = got_chars %>% map_chr(\"name\"),\n  id = got_chars
  %>% map_int(\"id\"),\n  alive = got_chars %>% map_lgl(\"alive\"),\n  gender = got_chars
  %>% map_chr(\"gender\"),\n  books = got_chars %>% map(\"books\")\n)\ngot_tibble\n#>
  # A tibble: 29 x 5\n#>                  name    id alive gender     books\n#>                 <chr>
  <int> <lgl>  <chr>    <list>\n#>  1      Theon Greyjoy  1022  TRUE   Male <chr [3]>\n#>
  \ 2   Tyrion Lannister  1052  TRUE   Male <chr [2]>\n#>  3  Victarion Greyjoy  1074
  \ TRUE   Male <chr [3]>\n#>  4               Will  1109 FALSE   Male <chr [1]>\n#>
  \ 5         Areo Hotah  1166  TRUE   Male <chr [3]>\n#>  6              Chett  1267
  FALSE   Male <chr [2]>\n#>  7            Cressen  1295 FALSE   Male <chr [2]>\n#>
  \ 8    Arianne Martell   130  TRUE Female <chr [4]>\n#>  9 Daenerys Targaryen  1303
  \ TRUE Female <chr [1]>\n#> 10     Davos Seaworth  1319  TRUE   Male <chr [1]>\n#>
  # ... with 19 more rows\n```\n\nOur rectangling is complete!\n\nGitHub repos\n------------\n\nNow,
  let's tackle a slightly more challenging problem: some information about GitHub
  repository that's stored in `repurrrsive::gh_repos`.\n\n### Inspect\n\nThe first
  challenge is always inspecting the data. We start by figuring out if we have an
  array or an object at the top level:\n\n``` r\nnames(gh_repos)\n#> NULL\nlength(gh_repos)\n#>
  [1] 6\n```\n\nHere names is `NULL`, so we have an array and should subset by position:\n\n```
  r\none <- gh_repos[[1]]\n```\n\nIt's worth trying `str()` again, but unfortunately
  this object is *still* too complicated. Let's index into it again:\n\n``` r\nnames(one)\n#>
  NULL\nlength(one)\n#> [1] 30\n\n# No names, so we can index by position\none_one
  <- one[[1]]\n```\n\nLet's try `str()` once more:\n\n``` r\nstr(one_one)\n#> List
  of 68\n#>  $ id               : int 61160198\n#>  $ name             : chr \"after\"\n#>
  \ $ full_name        : chr \"gaborcsardi/after\"\n#>  $ owner            :List of
  17\n#>   ..$ login              : chr \"gaborcsardi\"\n#>   ..$ id                 :
  int 660288\n#>   ..$ avatar_url         : chr \"https://avatars.githubusercontent.com/u/660288?v=3\"\n#>
  \  ..$ gravatar_id        : chr \"\"\n#>   ..$ url                : chr \"https://api.github.com/users/gaborcsardi\"\n#>
  \  ..$ html_url           : chr \"https://github.com/gaborcsardi\"\n#>   ..$ followers_url
  \     : chr \"https://api.github.com/users/gaborcsardi/followers\"\n#>   ..$ following_url
  \     : chr \"https://api.github.com/users/gaborcsardi/following{/other_user}\"\n#>
  \  ..$ gists_url          : chr \"https://api.github.com/users/gaborcsardi/gists{/gist_id}\"\n#>
  \  ..$ starred_url        : chr \"https://api.github.com/users/gaborcsardi/starred{/owner}{/repo}\"\n#>
  \  ..$ subscriptions_url  : chr \"https://api.github.com/users/gaborcsardi/subscriptions\"\n#>
  \  ..$ organizations_url  : chr \"https://api.github.com/users/gaborcsardi/orgs\"\n#>
  \  ..$ repos_url          : chr \"https://api.github.com/users/gaborcsardi/repos\"\n#>
  \  ..$ events_url         : chr \"https://api.github.com/users/gaborcsardi/events{/privacy}\"\n#>
  \  ..$ received_events_url: chr \"https://api.github.com/users/gaborcsardi/received_events\"\n#>
  \  ..$ type               : chr \"User\"\n#>   ..$ site_admin         : logi FALSE\n#>
  \ $ private          : logi FALSE\n#>  $ html_url         : chr \"https://github.com/gaborcsardi/after\"\n#>
  \ $ description      : chr \"Run Code in the Background\"\n#>  $ fork             :
  logi FALSE\n#>  $ url              : chr \"https://api.github.com/repos/gaborcsardi/after\"\n#>
  \ $ forks_url        : chr \"https://api.github.com/repos/gaborcsardi/after/forks\"\n#>
  \ $ keys_url         : chr \"https://api.github.com/repos/gaborcsardi/after/keys{/key_id}\"\n#>
  \ $ collaborators_url: chr \"https://api.github.com/repos/gaborcsardi/after/collaborators{/collaborator}\"\n#>
  \ $ teams_url        : chr \"https://api.github.com/repos/gaborcsardi/after/teams\"\n#>
  \ $ hooks_url        : chr \"https://api.github.com/repos/gaborcsardi/after/hooks\"\n#>
  \ $ issue_events_url : chr \"https://api.github.com/repos/gaborcsardi/after/issues/events{/number}\"\n#>
  \ $ events_url       : chr \"https://api.github.com/repos/gaborcsardi/after/events\"\n#>
  \ $ assignees_url    : chr \"https://api.github.com/repos/gaborcsardi/after/assignees{/user}\"\n#>
  \ $ branches_url     : chr \"https://api.github.com/repos/gaborcsardi/after/branches{/branch}\"\n#>
  \ $ tags_url         : chr \"https://api.github.com/repos/gaborcsardi/after/tags\"\n#>
  \ $ blobs_url        : chr \"https://api.github.com/repos/gaborcsardi/after/git/blobs{/sha}\"\n#>
  \ $ git_tags_url     : chr \"https://api.github.com/repos/gaborcsardi/after/git/tags{/sha}\"\n#>
  \ $ git_refs_url     : chr \"https://api.github.com/repos/gaborcsardi/after/git/refs{/sha}\"\n#>
  \ $ trees_url        : chr \"https://api.github.com/repos/gaborcsardi/after/git/trees{/sha}\"\n#>
  \ $ statuses_url     : chr \"https://api.github.com/repos/gaborcsardi/after/statuses/{sha}\"\n#>
  \ $ languages_url    : chr \"https://api.github.com/repos/gaborcsardi/after/languages\"\n#>
  \ $ stargazers_url   : chr \"https://api.github.com/repos/gaborcsardi/after/stargazers\"\n#>
  \ $ contributors_url : chr \"https://api.github.com/repos/gaborcsardi/after/contributors\"\n#>
  \ $ subscribers_url  : chr \"https://api.github.com/repos/gaborcsardi/after/subscribers\"\n#>
  \ $ subscription_url : chr \"https://api.github.com/repos/gaborcsardi/after/subscription\"\n#>
  \ $ commits_url      : chr \"https://api.github.com/repos/gaborcsardi/after/commits{/sha}\"\n#>
  \ $ git_commits_url  : chr \"https://api.github.com/repos/gaborcsardi/after/git/commits{/sha}\"\n#>
  \ $ comments_url     : chr \"https://api.github.com/repos/gaborcsardi/after/comments{/number}\"\n#>
  \ $ issue_comment_url: chr \"https://api.github.com/repos/gaborcsardi/after/issues/comments{/number}\"\n#>
  \ $ contents_url     : chr \"https://api.github.com/repos/gaborcsardi/after/contents/{+path}\"\n#>
  \ $ compare_url      : chr \"https://api.github.com/repos/gaborcsardi/after/compare/{base}...{head}\"\n#>
  \ $ merges_url       : chr \"https://api.github.com/repos/gaborcsardi/after/merges\"\n#>
  \ $ archive_url      : chr \"https://api.github.com/repos/gaborcsardi/after/{archive_format}{/ref}\"\n#>
  \ $ downloads_url    : chr \"https://api.github.com/repos/gaborcsardi/after/downloads\"\n#>
  \ $ issues_url       : chr \"https://api.github.com/repos/gaborcsardi/after/issues{/number}\"\n#>
  \ $ pulls_url        : chr \"https://api.github.com/repos/gaborcsardi/after/pulls{/number}\"\n#>
  \ $ milestones_url   : chr \"https://api.github.com/repos/gaborcsardi/after/milestones{/number}\"\n#>
  \ $ notifications_url: chr \"https://api.github.com/repos/gaborcsardi/after/notifications{?since,all,participating}\"\n#>
  \ $ labels_url       : chr \"https://api.github.com/repos/gaborcsardi/after/labels{/name}\"\n#>
  \ $ releases_url     : chr \"https://api.github.com/repos/gaborcsardi/after/releases{/id}\"\n#>
  \ $ deployments_url  : chr \"https://api.github.com/repos/gaborcsardi/after/deployments\"\n#>
  \ $ created_at       : chr \"2016-06-14T22:33:49Z\"\n#>  $ updated_at       : chr
  \"2016-07-21T17:42:35Z\"\n#>  $ pushed_at        : chr \"2016-07-09T16:13:42Z\"\n#>
  \ $ git_url          : chr \"git://github.com/gaborcsardi/after.git\"\n#>  $ ssh_url
  \         : chr \"git@github.com:gaborcsardi/after.git\"\n#>  $ clone_url        :
  chr \"https://github.com/gaborcsardi/after.git\"\n#>  $ svn_url          : chr \"https://github.com/gaborcsardi/after\"\n#>
  \ $ homepage         : NULL\n#>  $ size             : int 15\n#>  $ stargazers_count
  : int 5\n#>  $ watchers_count   : int 5\n#>  $ language         : chr \"R\"\n#>
  \ $ has_issues       : logi TRUE\n#>  $ has_downloads    : logi TRUE\n#>  $ has_wiki
  \        : logi TRUE\n#>  $ has_pages        : logi FALSE\n#>  $ forks_count      :
  int 0\n#>  $ mirror_url       : NULL\n#>  $ open_issues_count: int 0\n#>  $ forks
  \           : int 0\n#>  $ open_issues      : int 0\n#>  $ watchers         : int
  5\n#>  $ default_branch   : chr \"master\"\n```\n\nThe output is long, but informative!
  If you study this for a little bit, you should realise that we have a bunch of information
  about a single GitHub repository (`gaborcsard/after`).\n\nOur hypothesis then is
  that we have an array of arrays of objects, where each object contains information
  about a GitHub repository. In other words, `gh_repos[[1]]` is a list of GitHub repos
  (which is also a list). And so is `gh_repos[[2]]`, `gh_repos[[3]]`, ..., all the
  way up to `gh_repos[[6]]`. We can check this hypothesis by spelunking around the
  list a little more (results hidden to save space).\n\n``` r\nstr(gh_repos[[1]][[2]])\n#>
  List of 68\n#>  $ id               : int 40500181\n#>  $ name             : chr
  \"argufy\"\n#>  $ full_name        : chr \"gaborcsardi/argufy\"\n#>  $ owner            :List
  of 17\n#>   ..$ login              : chr \"gaborcsardi\"\n#>   ..$ id                 :
  int 660288\n#>   ..$ avatar_url         : chr \"https://avatars.githubusercontent.com/u/660288?v=3\"\n#>
  \  ..$ gravatar_id        : chr \"\"\n#>   ..$ url                : chr \"https://api.github.com/users/gaborcsardi\"\n#>
  \  ..$ html_url           : chr \"https://github.com/gaborcsardi\"\n#>   ..$ followers_url
  \     : chr \"https://api.github.com/users/gaborcsardi/followers\"\n#>   ..$ following_url
  \     : chr \"https://api.github.com/users/gaborcsardi/following{/other_user}\"\n#>
  \  ..$ gists_url          : chr \"https://api.github.com/users/gaborcsardi/gists{/gist_id}\"\n#>
  \  ..$ starred_url        : chr \"https://api.github.com/users/gaborcsardi/starred{/owner}{/repo}\"\n#>
  \  ..$ subscriptions_url  : chr \"https://api.github.com/users/gaborcsardi/subscriptions\"\n#>
  \  ..$ organizations_url  : chr \"https://api.github.com/users/gaborcsardi/orgs\"\n#>
  \  ..$ repos_url          : chr \"https://api.github.com/users/gaborcsardi/repos\"\n#>
  \  ..$ events_url         : chr \"https://api.github.com/users/gaborcsardi/events{/privacy}\"\n#>
  \  ..$ received_events_url: chr \"https://api.github.com/users/gaborcsardi/received_events\"\n#>
  \  ..$ type               : chr \"User\"\n#>   ..$ site_admin         : logi FALSE\n#>
  \ $ private          : logi FALSE\n#>  $ html_url         : chr \"https://github.com/gaborcsardi/argufy\"\n#>
  \ $ description      : chr \"Declarative function argument checks\"\n#>  $ fork
  \            : logi FALSE\n#>  $ url              : chr \"https://api.github.com/repos/gaborcsardi/argufy\"\n#>
  \ $ forks_url        : chr \"https://api.github.com/repos/gaborcsardi/argufy/forks\"\n#>
  \ $ keys_url         : chr \"https://api.github.com/repos/gaborcsardi/argufy/keys{/key_id}\"\n#>
  \ $ collaborators_url: chr \"https://api.github.com/repos/gaborcsardi/argufy/collaborators{/collaborator}\"\n#>
  \ $ teams_url        : chr \"https://api.github.com/repos/gaborcsardi/argufy/teams\"\n#>
  \ $ hooks_url        : chr \"https://api.github.com/repos/gaborcsardi/argufy/hooks\"\n#>
  \ $ issue_events_url : chr \"https://api.github.com/repos/gaborcsardi/argufy/issues/events{/number}\"\n#>
  \ $ events_url       : chr \"https://api.github.com/repos/gaborcsardi/argufy/events\"\n#>
  \ $ assignees_url    : chr \"https://api.github.com/repos/gaborcsardi/argufy/assignees{/user}\"\n#>
  \ $ branches_url     : chr \"https://api.github.com/repos/gaborcsardi/argufy/branches{/branch}\"\n#>
  \ $ tags_url         : chr \"https://api.github.com/repos/gaborcsardi/argufy/tags\"\n#>
  \ $ blobs_url        : chr \"https://api.github.com/repos/gaborcsardi/argufy/git/blobs{/sha}\"\n#>
  \ $ git_tags_url     : chr \"https://api.github.com/repos/gaborcsardi/argufy/git/tags{/sha}\"\n#>
  \ $ git_refs_url     : chr \"https://api.github.com/repos/gaborcsardi/argufy/git/refs{/sha}\"\n#>
  \ $ trees_url        : chr \"https://api.github.com/repos/gaborcsardi/argufy/git/trees{/sha}\"\n#>
  \ $ statuses_url     : chr \"https://api.github.com/repos/gaborcsardi/argufy/statuses/{sha}\"\n#>
  \ $ languages_url    : chr \"https://api.github.com/repos/gaborcsardi/argufy/languages\"\n#>
  \ $ stargazers_url   : chr \"https://api.github.com/repos/gaborcsardi/argufy/stargazers\"\n#>
  \ $ contributors_url : chr \"https://api.github.com/repos/gaborcsardi/argufy/contributors\"\n#>
  \ $ subscribers_url  : chr \"https://api.github.com/repos/gaborcsardi/argufy/subscribers\"\n#>
  \ $ subscription_url : chr \"https://api.github.com/repos/gaborcsardi/argufy/subscription\"\n#>
  \ $ commits_url      : chr \"https://api.github.com/repos/gaborcsardi/argufy/commits{/sha}\"\n#>
  \ $ git_commits_url  : chr \"https://api.github.com/repos/gaborcsardi/argufy/git/commits{/sha}\"\n#>
  \ $ comments_url     : chr \"https://api.github.com/repos/gaborcsardi/argufy/comments{/number}\"\n#>
  \ $ issue_comment_url: chr \"https://api.github.com/repos/gaborcsardi/argufy/issues/comments{/number}\"\n#>
  \ $ contents_url     : chr \"https://api.github.com/repos/gaborcsardi/argufy/contents/{+path}\"\n#>
  \ $ compare_url      : chr \"https://api.github.com/repos/gaborcsardi/argufy/compare/{base}...{head}\"\n#>
  \ $ merges_url       : chr \"https://api.github.com/repos/gaborcsardi/argufy/merges\"\n#>
  \ $ archive_url      : chr \"https://api.github.com/repos/gaborcsardi/argufy/{archive_format}{/ref}\"\n#>
  \ $ downloads_url    : chr \"https://api.github.com/repos/gaborcsardi/argufy/downloads\"\n#>
  \ $ issues_url       : chr \"https://api.github.com/repos/gaborcsardi/argufy/issues{/number}\"\n#>
  \ $ pulls_url        : chr \"https://api.github.com/repos/gaborcsardi/argufy/pulls{/number}\"\n#>
  \ $ milestones_url   : chr \"https://api.github.com/repos/gaborcsardi/argufy/milestones{/number}\"\n#>
  \ $ notifications_url: chr \"https://api.github.com/repos/gaborcsardi/argufy/notifications{?since,all,participating}\"\n#>
  \ $ labels_url       : chr \"https://api.github.com/repos/gaborcsardi/argufy/labels{/name}\"\n#>
  \ $ releases_url     : chr \"https://api.github.com/repos/gaborcsardi/argufy/releases{/id}\"\n#>
  \ $ deployments_url  : chr \"https://api.github.com/repos/gaborcsardi/argufy/deployments\"\n#>
  \ $ created_at       : chr \"2015-08-10T18:56:23Z\"\n#>  $ updated_at       : chr
  \"2016-06-30T18:28:08Z\"\n#>  $ pushed_at        : chr \"2016-03-12T14:59:25Z\"\n#>
  \ $ git_url          : chr \"git://github.com/gaborcsardi/argufy.git\"\n#>  $ ssh_url
  \         : chr \"git@github.com:gaborcsardi/argufy.git\"\n#>  $ clone_url        :
  chr \"https://github.com/gaborcsardi/argufy.git\"\n#>  $ svn_url          : chr
  \"https://github.com/gaborcsardi/argufy\"\n#>  $ homepage         : NULL\n#>  $
  size             : int 115\n#>  $ stargazers_count : int 19\n#>  $ watchers_count
  \  : int 19\n#>  $ language         : chr \"R\"\n#>  $ has_issues       : logi TRUE\n#>
  \ $ has_downloads    : logi TRUE\n#>  $ has_wiki         : logi TRUE\n#>  $ has_pages
  \       : logi FALSE\n#>  $ forks_count      : int 1\n#>  $ mirror_url       : NULL\n#>
  \ $ open_issues_count: int 6\n#>  $ forks            : int 1\n#>  $ open_issues
  \     : int 6\n#>  $ watchers         : int 19\n#>  $ default_branch   : chr \"master\"\nstr(gh_repos[[2]][[2]])\n#>
  List of 68\n#>  $ id               : int 14152301\n#>  $ name             : chr
  \"2014-01-27-miami\"\n#>  $ full_name        : chr \"jennybc/2014-01-27-miami\"\n#>
  \ $ owner            :List of 17\n#>   ..$ login              : chr \"jennybc\"\n#>
  \  ..$ id                 : int 599454\n#>   ..$ avatar_url         : chr \"https://avatars.githubusercontent.com/u/599454?v=3\"\n#>
  \  ..$ gravatar_id        : chr \"\"\n#>   ..$ url                : chr \"https://api.github.com/users/jennybc\"\n#>
  \  ..$ html_url           : chr \"https://github.com/jennybc\"\n#>   ..$ followers_url
  \     : chr \"https://api.github.com/users/jennybc/followers\"\n#>   ..$ following_url
  \     : chr \"https://api.github.com/users/jennybc/following{/other_user}\"\n#>
  \  ..$ gists_url          : chr \"https://api.github.com/users/jennybc/gists{/gist_id}\"\n#>
  \  ..$ starred_url        : chr \"https://api.github.com/users/jennybc/starred{/owner}{/repo}\"\n#>
  \  ..$ subscriptions_url  : chr \"https://api.github.com/users/jennybc/subscriptions\"\n#>
  \  ..$ organizations_url  : chr \"https://api.github.com/users/jennybc/orgs\"\n#>
  \  ..$ repos_url          : chr \"https://api.github.com/users/jennybc/repos\"\n#>
  \  ..$ events_url         : chr \"https://api.github.com/users/jennybc/events{/privacy}\"\n#>
  \  ..$ received_events_url: chr \"https://api.github.com/users/jennybc/received_events\"\n#>
  \  ..$ type               : chr \"User\"\n#>   ..$ site_admin         : logi FALSE\n#>
  \ $ private          : logi FALSE\n#>  $ html_url         : chr \"https://github.com/jennybc/2014-01-27-miami\"\n#>
  \ $ description      : chr \"Software Carpentry Bootcamp at the University of Miami\"\n#>
  \ $ fork             : logi FALSE\n#>  $ url              : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami\"\n#>
  \ $ forks_url        : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/forks\"\n#>
  \ $ keys_url         : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/keys{/key_id}\"\n#>
  \ $ collaborators_url: chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/collaborators{/collaborator}\"\n#>
  \ $ teams_url        : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/teams\"\n#>
  \ $ hooks_url        : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/hooks\"\n#>
  \ $ issue_events_url : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/issues/events{/number}\"\n#>
  \ $ events_url       : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/events\"\n#>
  \ $ assignees_url    : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/assignees{/user}\"\n#>
  \ $ branches_url     : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/branches{/branch}\"\n#>
  \ $ tags_url         : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/tags\"\n#>
  \ $ blobs_url        : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/git/blobs{/sha}\"\n#>
  \ $ git_tags_url     : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/git/tags{/sha}\"\n#>
  \ $ git_refs_url     : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/git/refs{/sha}\"\n#>
  \ $ trees_url        : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/git/trees{/sha}\"\n#>
  \ $ statuses_url     : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/statuses/{sha}\"\n#>
  \ $ languages_url    : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/languages\"\n#>
  \ $ stargazers_url   : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/stargazers\"\n#>
  \ $ contributors_url : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/contributors\"\n#>
  \ $ subscribers_url  : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/subscribers\"\n#>
  \ $ subscription_url : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/subscription\"\n#>
  \ $ commits_url      : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/commits{/sha}\"\n#>
  \ $ git_commits_url  : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/git/commits{/sha}\"\n#>
  \ $ comments_url     : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/comments{/number}\"\n#>
  \ $ issue_comment_url: chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/issues/comments{/number}\"\n#>
  \ $ contents_url     : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/contents/{+path}\"\n#>
  \ $ compare_url      : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/compare/{base}...{head}\"\n#>
  \ $ merges_url       : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/merges\"\n#>
  \ $ archive_url      : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/{archive_format}{/ref}\"\n#>
  \ $ downloads_url    : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/downloads\"\n#>
  \ $ issues_url       : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/issues{/number}\"\n#>
  \ $ pulls_url        : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/pulls{/number}\"\n#>
  \ $ milestones_url   : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/milestones{/number}\"\n#>
  \ $ notifications_url: chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/notifications{?since,all,participating}\"\n#>
  \ $ labels_url       : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/labels{/name}\"\n#>
  \ $ releases_url     : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/releases{/id}\"\n#>
  \ $ deployments_url  : chr \"https://api.github.com/repos/jennybc/2014-01-27-miami/deployments\"\n#>
  \ $ created_at       : chr \"2013-11-05T19:55:23Z\"\n#>  $ updated_at       : chr
  \"2014-06-02T08:52:46Z\"\n#>  $ pushed_at        : chr \"2014-01-28T07:01:26Z\"\n#>
  \ $ git_url          : chr \"git://github.com/jennybc/2014-01-27-miami.git\"\n#>
  \ $ ssh_url          : chr \"git@github.com:jennybc/2014-01-27-miami.git\"\n#>  $
  clone_url        : chr \"https://github.com/jennybc/2014-01-27-miami.git\"\n#>  $
  svn_url          : chr \"https://github.com/jennybc/2014-01-27-miami\"\n#>  $ homepage
  \        : NULL\n#>  $ size             : int 16662\n#>  $ stargazers_count : int
  1\n#>  $ watchers_count   : int 1\n#>  $ language         : chr \"Python\"\n#>  $
  has_issues       : logi TRUE\n#>  $ has_downloads    : logi TRUE\n#>  $ has_wiki
  \        : logi TRUE\n#>  $ has_pages        : logi TRUE\n#>  $ forks_count      :
  int 6\n#>  $ mirror_url       : NULL\n#>  $ open_issues_count: int 4\n#>  $ forks
  \           : int 6\n#>  $ open_issues      : int 4\n#>  $ watchers         : int
  1\n#>  $ default_branch   : chr \"gh-pages\"\nstr(gh_repos[[6]][[30]])\n#> List
  of 68\n#>  $ id               : int 54576272\n#>  $ name             : chr \"youtubedata\"\n#>
  \ $ full_name        : chr \"masalmon/youtubedata\"\n#>  $ owner            :List
  of 17\n#>   ..$ login              : chr \"masalmon\"\n#>   ..$ id                 :
  int 8360597\n#>   ..$ avatar_url         : chr \"https://avatars.githubusercontent.com/u/8360597?v=3\"\n#>
  \  ..$ gravatar_id        : chr \"\"\n#>   ..$ url                : chr \"https://api.github.com/users/masalmon\"\n#>
  \  ..$ html_url           : chr \"https://github.com/masalmon\"\n#>   ..$ followers_url
  \     : chr \"https://api.github.com/users/masalmon/followers\"\n#>   ..$ following_url
  \     : chr \"https://api.github.com/users/masalmon/following{/other_user}\"\n#>
  \  ..$ gists_url          : chr \"https://api.github.com/users/masalmon/gists{/gist_id}\"\n#>
  \  ..$ starred_url        : chr \"https://api.github.com/users/masalmon/starred{/owner}{/repo}\"\n#>
  \  ..$ subscriptions_url  : chr \"https://api.github.com/users/masalmon/subscriptions\"\n#>
  \  ..$ organizations_url  : chr \"https://api.github.com/users/masalmon/orgs\"\n#>
  \  ..$ repos_url          : chr \"https://api.github.com/users/masalmon/repos\"\n#>
  \  ..$ events_url         : chr \"https://api.github.com/users/masalmon/events{/privacy}\"\n#>
  \  ..$ received_events_url: chr \"https://api.github.com/users/masalmon/received_events\"\n#>
  \  ..$ type               : chr \"User\"\n#>   ..$ site_admin         : logi FALSE\n#>
  \ $ private          : logi FALSE\n#>  $ html_url         : chr \"https://github.com/masalmon/youtubedata\"\n#>
  \ $ description      : NULL\n#>  $ fork             : logi FALSE\n#>  $ url              :
  chr \"https://api.github.com/repos/masalmon/youtubedata\"\n#>  $ forks_url        :
  chr \"https://api.github.com/repos/masalmon/youtubedata/forks\"\n#>  $ keys_url
  \        : chr \"https://api.github.com/repos/masalmon/youtubedata/keys{/key_id}\"\n#>
  \ $ collaborators_url: chr \"https://api.github.com/repos/masalmon/youtubedata/collaborators{/collaborator}\"\n#>
  \ $ teams_url        : chr \"https://api.github.com/repos/masalmon/youtubedata/teams\"\n#>
  \ $ hooks_url        : chr \"https://api.github.com/repos/masalmon/youtubedata/hooks\"\n#>
  \ $ issue_events_url : chr \"https://api.github.com/repos/masalmon/youtubedata/issues/events{/number}\"\n#>
  \ $ events_url       : chr \"https://api.github.com/repos/masalmon/youtubedata/events\"\n#>
  \ $ assignees_url    : chr \"https://api.github.com/repos/masalmon/youtubedata/assignees{/user}\"\n#>
  \ $ branches_url     : chr \"https://api.github.com/repos/masalmon/youtubedata/branches{/branch}\"\n#>
  \ $ tags_url         : chr \"https://api.github.com/repos/masalmon/youtubedata/tags\"\n#>
  \ $ blobs_url        : chr \"https://api.github.com/repos/masalmon/youtubedata/git/blobs{/sha}\"\n#>
  \ $ git_tags_url     : chr \"https://api.github.com/repos/masalmon/youtubedata/git/tags{/sha}\"\n#>
  \ $ git_refs_url     : chr \"https://api.github.com/repos/masalmon/youtubedata/git/refs{/sha}\"\n#>
  \ $ trees_url        : chr \"https://api.github.com/repos/masalmon/youtubedata/git/trees{/sha}\"\n#>
  \ $ statuses_url     : chr \"https://api.github.com/repos/masalmon/youtubedata/statuses/{sha}\"\n#>
  \ $ languages_url    : chr \"https://api.github.com/repos/masalmon/youtubedata/languages\"\n#>
  \ $ stargazers_url   : chr \"https://api.github.com/repos/masalmon/youtubedata/stargazers\"\n#>
  \ $ contributors_url : chr \"https://api.github.com/repos/masalmon/youtubedata/contributors\"\n#>
  \ $ subscribers_url  : chr \"https://api.github.com/repos/masalmon/youtubedata/subscribers\"\n#>
  \ $ subscription_url : chr \"https://api.github.com/repos/masalmon/youtubedata/subscription\"\n#>
  \ $ commits_url      : chr \"https://api.github.com/repos/masalmon/youtubedata/commits{/sha}\"\n#>
  \ $ git_commits_url  : chr \"https://api.github.com/repos/masalmon/youtubedata/git/commits{/sha}\"\n#>
  \ $ comments_url     : chr \"https://api.github.com/repos/masalmon/youtubedata/comments{/number}\"\n#>
  \ $ issue_comment_url: chr \"https://api.github.com/repos/masalmon/youtubedata/issues/comments{/number}\"\n#>
  \ $ contents_url     : chr \"https://api.github.com/repos/masalmon/youtubedata/contents/{+path}\"\n#>
  \ $ compare_url      : chr \"https://api.github.com/repos/masalmon/youtubedata/compare/{base}...{head}\"\n#>
  \ $ merges_url       : chr \"https://api.github.com/repos/masalmon/youtubedata/merges\"\n#>
  \ $ archive_url      : chr \"https://api.github.com/repos/masalmon/youtubedata/{archive_format}{/ref}\"\n#>
  \ $ downloads_url    : chr \"https://api.github.com/repos/masalmon/youtubedata/downloads\"\n#>
  \ $ issues_url       : chr \"https://api.github.com/repos/masalmon/youtubedata/issues{/number}\"\n#>
  \ $ pulls_url        : chr \"https://api.github.com/repos/masalmon/youtubedata/pulls{/number}\"\n#>
  \ $ milestones_url   : chr \"https://api.github.com/repos/masalmon/youtubedata/milestones{/number}\"\n#>
  \ $ notifications_url: chr \"https://api.github.com/repos/masalmon/youtubedata/notifications{?since,all,participating}\"\n#>
  \ $ labels_url       : chr \"https://api.github.com/repos/masalmon/youtubedata/labels{/name}\"\n#>
  \ $ releases_url     : chr \"https://api.github.com/repos/masalmon/youtubedata/releases{/id}\"\n#>
  \ $ deployments_url  : chr \"https://api.github.com/repos/masalmon/youtubedata/deployments\"\n#>
  \ $ created_at       : chr \"2016-03-23T16:35:56Z\"\n#>  $ updated_at       : chr
  \"2016-03-23T16:36:40Z\"\n#>  $ pushed_at        : chr \"2016-03-23T16:43:46Z\"\n#>
  \ $ git_url          : chr \"git://github.com/masalmon/youtubedata.git\"\n#>  $
  ssh_url          : chr \"git@github.com:masalmon/youtubedata.git\"\n#>  $ clone_url
  \       : chr \"https://github.com/masalmon/youtubedata.git\"\n#>  $ svn_url          :
  chr \"https://github.com/masalmon/youtubedata\"\n#>  $ homepage         : NULL\n#>
  \ $ size             : int 75\n#>  $ stargazers_count : int 0\n#>  $ watchers_count
  \  : int 0\n#>  $ language         : chr \"R\"\n#>  $ has_issues       : logi TRUE\n#>
  \ $ has_downloads    : logi TRUE\n#>  $ has_wiki         : logi TRUE\n#>  $ has_pages
  \       : logi FALSE\n#>  $ forks_count      : int 0\n#>  $ mirror_url       : NULL\n#>
  \ $ open_issues_count: int 0\n#>  $ forks            : int 0\n#>  $ open_issues
  \     : int 0\n#>  $ watchers         : int 0\n#>  $ default_branch   : chr \"master\"\n```\n\nHow
  many repos are there in total? We need to fund the length of each sub-list, and
  sum them up:\n\n``` r\ngh_repos %>% map_int(length) %>% sum()\n#> [1] 176\n```\n\n###
  Flatten\n\nThis nesting is annoying and doesn't contain any useful information.
  (You might wonder why it's there in the first place: here it's because each top-level
  list is for a single user, but it's common to see this sort of structure when retrieving
  multiple pages of data). The easiest thing is to get rid of it by using `flatten()`,
  which flattens a list of lists into a single list. There were 176 sublists before
  so now we get a list of length 176.\n\n``` r\ngh_flat <- gh_repos %>% flatten()\nlength(gh_flat)\n#>
  [1] 176\n```\n\n![](diagrams/lists-flatten.png)\n\n### Rectangle\n\nImagine we want
  to collapse some of this information into a tibble. For the sake of this example,
  lets say we want:\n\n-   the name of the repo\n-   the number of open issues\n-
  \  if it has a wiki\n-   the homepage\n-   the owner's GitHub name\n\nTo extract
  each of these variables we need to use a map function. The first three are easy:
  you just need to identify the name of the component and its type.\n\n``` r\nfirst10
  <- gh_flat %>% head(10)\n\nfirst10 %>% map_chr(\"name\")\n#>  [1] \"after\"       \"argufy\"
  \     \"ask\"         \"baseimports\" \"citest\"     \n#>  [6] \"clisymbols\"  \"cmaker\"
  \     \"cmark\"       \"conditions\"  \"crayon\"\nfirst10 %>% map_int(\"open_issues_count\")\n#>
  \ [1] 0 6 4 0 0 0 0 0 0 7\nfirst10 %>% map_lgl(\"has_wiki\")\n#>  [1] TRUE TRUE
  TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n```\n\nThe homepage is a little trickier:\n\n```
  r\nfirst10 %>% map_chr(\"homepage\")\n#> Error: Result 1 is not a length 1 atomic
  vector\n```\n\nWhenever you see this error, you've got two options to dig into it.
  Either switch to `map()` or find the specific value that's a problem. Here that's
  position 1.\n\n``` r\nfirst10[[1]]$\"homepage\"\n#> NULL\nfirst10 %>% map(\"homepage\")\n#>
  [[1]]\n#> NULL\n#> \n#> [[2]]\n#> NULL\n#> \n#> [[3]]\n#> NULL\n#> \n#> [[4]]\n#>
  NULL\n#> \n#> [[5]]\n#> NULL\n#> \n#> [[6]]\n#> [1] \"\"\n#> \n#> [[7]]\n#> NULL\n#>
  \n#> [[8]]\n#> NULL\n#> \n#> [[9]]\n#> NULL\n#> \n#> [[10]]\n#> NULL\n```\n\nIt
  looks like most of these are missing a homepage. JSON doesn't have missing values,
  so instead of an `NA`, we get a `NULL`. purrr map functions provide an easy way
  to turn these into something useful: you can supply a `.default` value. Here I'm
  going to use `\"\"` since it looks like some repos get that value. Finding the right
  default value is often a matter of trial and error.\n\n``` r\nfirst10 %>% map_chr(\"homepage\",
  .default = \"\")\n#>  [1] \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\"\n```\n\n(None
  of the first 10 repos have homepages but later ones do)\n\nGetting the owner's repo
  name is a little trickier because it doesn't live at the top-level; it lives one
  level down. Fortunately you can supply a character vector to the map functions:\n\n```
  r\nfirst10 %>% map_chr(c(\"owner\", \"login\"))\n#>  [1] \"gaborcsardi\" \"gaborcsardi\"
  \"gaborcsardi\" \"gaborcsardi\" \"gaborcsardi\"\n#>  [6] \"gaborcsardi\" \"gaborcsardi\"
  \"gaborcsardi\" \"gaborcsardi\" \"gaborcsardi\"\n```\n\nWe can put all these bits
  together to make a tibble:\n\n``` r\ngh_tibble <- tibble(\n  name =     gh_flat
  %>% map_chr(\"name\"),\n  issues =   gh_flat %>% map_int(\"open_issues_count\"),\n
  \ wiki =     gh_flat %>% map_lgl(\"has_wiki\"),\n  homepage = gh_flat %>% map_chr(\"homepage\",
  .default = \"\"),\n  owner =    gh_flat %>% map_chr(c(\"owner\", \"login\"))\n)\ngh_tibble\n#>
  # A tibble: 176 x 5\n#>           name issues  wiki homepage       owner\n#>          <chr>
  \ <int> <lgl>    <chr>       <chr>\n#>  1       after      0  TRUE          gaborcsardi\n#>
  \ 2      argufy      6  TRUE          gaborcsardi\n#>  3         ask      4  TRUE
  \         gaborcsardi\n#>  4 baseimports      0  TRUE          gaborcsardi\n#>  5
  \     citest      0  TRUE          gaborcsardi\n#>  6  clisymbols      0  TRUE          gaborcsardi\n#>
  \ 7      cmaker      0  TRUE          gaborcsardi\n#>  8       cmark      0  TRUE
  \         gaborcsardi\n#>  9  conditions      0  TRUE          gaborcsardi\n#> 10
  \     crayon      7  TRUE          gaborcsardi\n#> # ... with 166 more rows\n```\n\nOur
  rectangling is complete!\n"
